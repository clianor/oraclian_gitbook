# 쿠키와 세션

쿠키와 세션은 둘다 통신시 특정한 정보를 저장하기 위해 사용하는 것입니다  
예를 들면 로그인을 위한 세션정보와 같은 것들이 있습니다

먼저 쿠키와 세션을 사용하는 이유는 HTTP 프로토콜이 Stateless 프로토콜 즉 상태를 가지지 않은 프로토콜이기에 각각의 통신은 이전의 통신과는 완전히 무관한 통신이라는 점에 기반합니다

하지만 대표적으로 로그인 유지와 같은 상태를 유지해야하는 작업은 항상 존재하고 이를 위해 존재하는 것이 쿠키와 세션입니다

1**. 쿠키**  
- 키와 값으로 구성되어 있으며 클라이언트에 저장되며 만료일을 설정할 수 있음  
  
- 쿠키의 동작 순서  
    1. 클라이언트가 페이지를 요청  
    2. 웹 서버가 쿠키를 생성  
    3. 생성한 쿠키에 정보를 담아 클라이언트에게 전송  
    4. 넘겨 받은 쿠키를 클라이언트가 로컬에 저장  
    5. 재 방문시 클라이언트에 쿠키가 있는 경우 요청시마다 쿠키를 함께 전송  
  
- 사용 예시  
    1. 사이트 재 방문시 아이디, 비밀번호 자동 입력  
    2. 오늘 이 창을 다시 보지 않기 체크  
    3. 쇼핑몰 장바구니

**2. 세션**  
- 일정 시간동안 같은 사용자로부터 들어오는 일련의 요구를 하나의 상태로 보고, 그 상태를 일정하게 유지시키는 기술. \(일정시간은 브라우저를 종료하여 연결을 끝내는 시점\)  
- 브라우저를 닫거나 서버에서 세션을 삭제했을때 삭제됨  
  
- 세션의 동작 순서  
    1. 클라이언트가 페이지를 요청  
    2. 서버는 클라이언트가 session-id를 보냈는지 확인  
    3. session-id가 존재하지 않으면 session-id를 생성해 클라이언트에게 전송 및 서버에 저장  
    4.요청시마다 session-id 값을 서버에 전송  
  
- 사용예시  
    1. 로그인 유지

위의 내용에서 세션과 관련된 정보는 일반적으로 tomcat을 활용한 JSESSIONID와 관련된 내용입니다  
이는 브라우저에서 서버로 최초 요청시 Response 헤더에 JSESSIONID값을 발급하여  
 `Set-Cookie: JSESSIONID=<키값>`   와 같이 Response 헤더에 포함되어 날아오게 됩니다  
  
다음 글에선 JWT에 대해 정리할 생각입니다.

